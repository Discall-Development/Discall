{
  "version": 3,
  "sources": ["../../src/ws.ts"],
  "sourcesContent": ["import { RetryEventDetails, Websocket, WebsocketBuilder } from 'websocket-ts'\nimport { VersionError, EncodingError } from './errors';\n\nexport class DiscallWS {\n\tws: Websocket\n\tversion: number\n\tencoding: 'json' | 'etf'\n\twsUri: URL = new URL('wss://gateway.discord.gg')\n\n\tconstructor(\n\t\tversion: number = 9,\n\t\tencoding: string = 'json',\n\t\tcompress: boolean = false\n\t) {\n\t\tif (version < 8 || version > 9)\n\t\t\tthrow new VersionError(version);\n\t\tthis.version = version;\n\n\t\tif (encoding !== 'json' && encoding !== 'etf')\n\t\t\tthrow new EncodingError(encoding);\n\t\tthis.encoding = encoding;\n\t\t\n\t\tthis.wsUri.searchParams.append('v', `${this.version}`);\n\t\tthis.wsUri.searchParams.append('encoding', this.encoding);\n\t\tif (compress)\n\t\t\tthis.wsUri.searchParams.append('compress', 'zlib-stream');\n\t\t\n\t\tlet builder = new WebsocketBuilder(this.wsUri.toString())\n\t\t\t.onOpen(this.on_open)\n\t\t\t.onClose(this.on_close)\n\t\t\t.onError(this.on_error)\n\t\t\t.onMessage(this.on_message)\n\t\t\t.onRetry(this.on_retry);\n\t\tthis.ws = builder.build();\n\t}\n\n\ton_open(ws: Websocket, event: Event): void {}\n\t\n\ton_close(ws: Websocket, event: CloseEvent): void {}\n\t\n\ton_error(ws: Websocket, event: Event): void {}\n\t\n\ton_message(ws: Websocket, event: MessageEvent): void {\n\t\tconsole.log(event.data, '\\n-----------------------------');\n\t}\n\t\n\ton_retry(ws: Websocket, event: CustomEvent<RetryEventDetails>): void {}\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA,0BAA+D;AAC/D,oBAA4C;AAErC,gBAAgB;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA,QAAa,IAAI,IAAI;AAAA,EAErB,YACC,UAAkB,GAClB,WAAmB,QACnB,WAAoB,OACnB;AACD,QAAI,UAAU,KAAK,UAAU;AAC5B,YAAM,IAAI,2BAAa;AACxB,SAAK,UAAU;AAEf,QAAI,aAAa,UAAU,aAAa;AACvC,YAAM,IAAI,4BAAc;AACzB,SAAK,WAAW;AAEhB,SAAK,MAAM,aAAa,OAAO,KAAK,GAAG,KAAK;AAC5C,SAAK,MAAM,aAAa,OAAO,YAAY,KAAK;AAChD,QAAI;AACH,WAAK,MAAM,aAAa,OAAO,YAAY;AAE5C,QAAI,UAAU,IAAI,qCAAiB,KAAK,MAAM,YAC5C,OAAO,KAAK,SACZ,QAAQ,KAAK,UACb,QAAQ,KAAK,UACb,UAAU,KAAK,YACf,QAAQ,KAAK;AACf,SAAK,KAAK,QAAQ;AAAA;AAAA,EAGnB,QAAQ,IAAe,OAAoB;AAAA;AAAA,EAE3C,SAAS,IAAe,OAAyB;AAAA;AAAA,EAEjD,SAAS,IAAe,OAAoB;AAAA;AAAA,EAE5C,WAAW,IAAe,OAA2B;AACpD,YAAQ,IAAI,MAAM,MAAM;AAAA;AAAA,EAGzB,SAAS,IAAe,OAA6C;AAAA;AAAA;",
  "names": []
}
